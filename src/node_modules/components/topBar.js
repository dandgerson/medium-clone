import React, { useContext } from 'react'
import { Link, NavLink } from 'react-router-dom'

import { CurrentUserContext } from 'contexts/currentUser'

const TopBar = () => {
  const [currentUserState] = useContext(CurrentUserContext)
  console.log({ currentUserState })
  return (
    <nav className='navbar navbar-light'>
      <div className="container">
        <Link to='/' className='navbar-brand'>Medium</Link>
      </div>
      <ul className='nav navbar-nav pull-xs-right'>
        <li className='nav-item'>
          <NavLink to='/' exact className='nav-link'>Home</NavLink>
        </li>
        {currentUserState.isLoggedIn === false && (
          <>
            <li className='nav-item'>
              <NavLink to='/login' exact className='nav-link'>Sign in</NavLink>
            </li>
            <li className='nav-item'>
              <NavLink to='/register' exact className='nav-link'>Sign up</NavLink>
            </li>
          </>
        )}
        {currentUserState.isLoggedIn && (
          <>
            <li className='nav-item'>
              <NavLink
                className='nav-link'
                to='/acticles/new'
                exact>
                <i className='ion-compose' />
                &nbsp; New Post
              </NavLink>
            </li>
            <li className='nav-item'>
              <NavLink
                className='nav-link'
                to={`/profiles/${currentUserState.currentUser.username}`}
                exact>
                <img
                  className='user-pic'
                  alt='userpic'
                  src={currentUserState.currentUser.image} />
                  &nbsp; {currentUserState.currentUser.username}
              </NavLink>
            </li>
          </>
        )}
      </ul>
    </nav>
  )
}

export default TopBar
